---
title: "Building a Real-Time Voice AI App with Next.js & OpenAI Realtime API"
category: Daily
author: Daniel Nguyen
tags: ['#redux']
date: 2025-12-10
thumbnailText: AI
---

Real-time voice AI is no longer futuristic. With the **Realtime API from OpenAI**, you can now build **live, low-latency, speech-to-speech AI applications** that feel like real human conversations.

In this guide, youâ€™ll learn **the complete production-ready architecture** to build a secure **Real-Time Voice AI App using Next.js**, including:

* âœ… API Key vs Ephemeral Key (what most people get wrong)
* âœ… Adding a **System Prompt (AI personality)**
* âœ… Using **Function Calling (Tools)** in Realtime


## 1. What Is the OpenAI Realtime API?

The Realtime API allows you to build:

* ğŸ§ **Live audio streaming**
* ğŸ—£ï¸ **Speech-to-speech conversation**
* âš¡ **Sub-second latency**
* ğŸ”„ **Persistent sessions via WebRTC**
* ğŸ› ï¸ **Function calling during live voice chat**

### API Key (`sk-`) vs Ephemeral Key (`ek-`) â€” The Core Security Concept

### Authentication Flow

```txt
Browser (Next.js Client)
        â†“
Next.js API Route (Server)
        â†“
OpenAI generates ek-...
        â†“
Browser connects with ek-...
```

âœ… **A new ephemeral key must be generated for every Realtime session.**

Understanding this difference is **mandatory for production apps**.

#### ğŸ” API Key (`sk-...`)

* Long-lived
* Full access to OpenAI APIs
* âœ… Used only on **servers**
* âŒ Never expose in React or browsers

#### â³ Ephemeral Key (`ek-...`)

* Short-lived (30â€“600 seconds)
* WebRTC-only authentication
* âœ… Safe for browsers
* âŒ Cannot call normal REST APIs

## 2. Back-end

### âœ… Install OpenAI SDK

```bash
npm install openai
```

---

### âœ… `app/api/realtime-token/route.ts`

```ts
import { NextResponse } from "next/server";
import OpenAI from "openai";

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

export async function GET() {
  const result = await openai.realtime.clientSessions.create({
    session: {
      type: "realtime",
      model: "gpt-realtime",
    },
    ttl: 600, // 10 minutes
  });

  return NextResponse.json({
    client_secret: result.client_secret.value,
  });
}
```

---

### âœ… `.env.local`

```env
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
```

âš ï¸ **Your real API key must never appear in frontend code.**

---

## 3. Front-end

```ts
const res = await fetch("/api/realtime-token");
const { client_secret } = await res.json();

await session.connect({
  apiKey: client_secret, // ek-...
});
```

âœ… Secure
âœ… WebRTC-ready
âœ… Production-safe

This also prevents the infamous WebRTC error:

> âŒ `Failed to parse SessionDescription. Expect line: v=`

Which happens when you use **expired `ek-` tokens**.

---
