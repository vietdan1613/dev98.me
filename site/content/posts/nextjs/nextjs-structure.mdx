---
title: "NextJS - Project Structure"
category: NextJS
author: Daniel Nguyen
tags: ['#NextJS']
date: 2023-09-01
thumbnailText: NextJS
---

# Folder and file conventions

### Top-Level Folders

Top-level folders help organize your application code and static assets.

| Folder   | Purpose                                     |
| -------- | ------------------------------------------- |
| `app`    | App Router (modern routing system)          |
| `pages`  | Pages Router (legacy routing)               |
| `public` | Static assets (images, fonts, etc.)         |
| `src`    | Optional folder for application source code |

The `src` folder is optional but recommended for separating application logic from configuration files.

### Top-Level Files

These files configure and manage your project:

| File                 | Purpose                                    |
| -------------------- | ------------------------------------------ |
| `next.config.js`     | Next.js configuration                      |
| `package.json`       | Dependencies and scripts                   |
| `instrumentation.ts` | OpenTelemetry and instrumentation          |
| `proxy.ts`           | Request proxy                              |
| `.env*`              | Environment variables (not tracked in Git) |
| `eslint.config.mjs`  | ESLint configuration                       |
| `tsconfig.json`      | TypeScript configuration                   |
| `jsconfig.json`      | JavaScript configuration                   |
| `next-env.d.ts`      | Type declarations (not tracked)            |
| `.gitignore`         | Git ignore rules                           |

### Routing File Conventions

Next.js uses file-based routing. Special files define behavior within each route segment.

| File               | Purpose                             |
| ------------------ | ----------------------------------- |
| `layout.tsx`       | Shared layout (header, nav, footer) |
| `page.tsx`         | Public route page                   |
| `loading.tsx`      | Loading UI (Suspense boundary)      |
| `error.tsx`        | Error boundary                      |
| `global-error.tsx` | Global error UI                     |
| `not-found.tsx`    | 404 page                            |
| `route.ts`         | API endpoint                        |
| `template.tsx`     | Re-rendered layout                  |
| `default.tsx`      | Parallel route fallback             |


### Metadata File Conventions

#### App Icons

| File             | Purpose         |
| ---------------- | --------------- |
| `favicon.ico`    | Browser favicon |
| `icon.png`       | App icon        |
| `apple-icon.png` | Apple devices   |

#### Open Graph & Social Images

| File                  | Purpose                   |
| --------------------- | ------------------------- |
| `opengraph-image.png` | Facebook/LinkedIn preview |
| `twitter-image.png`   | Twitter preview           |

#### SEO Files

| File          | Purpose             |
| ------------- | ------------------- |
| `sitemap.xml` | Sitemap             |
| `robots.txt`  | Robots instructions |

These can also be dynamically generated using `.js` or `.ts`.

# Routes

### Nested Routes

Folders define URL segments. Nested folders create nested routes.

Example:

```
app/
 â”œâ”€â”€ layout.tsx
 â”œâ”€â”€ page.tsx
 â””â”€â”€ blog/
     â”œâ”€â”€ layout.tsx
     â”œâ”€â”€ page.tsx
     â””â”€â”€ authors/
         â””â”€â”€ page.tsx
```

Resulting URLs:

* `/`
* `/blog`
* `/blog/authors`

A route becomes publicly accessible only when a `page.tsx` or `route.ts` file exists.

### Dynamic Routes

Dynamic routes use square brackets:

| Pattern       | Example URL             |
| ------------- | ----------------------- |
| `[slug]`      | `/blog/my-first-post`   |
| `[...slug]`   | `/shop/clothing/shirts` |
| `[[...slug]]` | Optional catch-all      |

Example:

```
app/blog/[slug]/page.tsx
```

Access parameters via:

```tsx
export default function Page({ params }) {
  return <div>{params.slug}</div>
}
```

### Route Groups

Wrap folder names in parentheses to organize routes **without affecting the URL**.

```
app/(marketing)/page.tsx â†’ /
```

Useful for:

* Grouping marketing pages
* Sharing layouts
* Creating multiple root layouts

### Private Folders 

Prefix with underscore to exclude from routing:

```
app/blog/_components/Post.tsx
app/blog/_lib/data.ts
```

Useful for:

* UI utilities
* Helper functions
* Avoiding naming conflicts

# Component Hierarchy

Special files render in this order:

```
layout
template
error
loading
not-found
page (or nested layout)
```

Each nested route inherits and wraps with parent layouts recursively.

![example](./imgs/structure-1.png)

# Project Organization Strategies

Next.js is flexible. Choose what fits your team.

We separate the app into **4 layers**:

```
1ï¸âƒ£ Interface Layer   â†’ Next.js routing (app/)
2ï¸âƒ£ Domain Layer      â†’ features/ (business logic)
3ï¸âƒ£ Shared Layer      â†’ reusable UI / hooks / utils
4ï¸âƒ£ Infrastructure    â†’ API, config, env, services
```

```
my-app/
â”œâ”€â”€ public/                         # Static assets
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                        # ğŸš¨ ROUTING ONLY (Next.js layer)
â”‚   â”‚   â”œâ”€â”€ (public)/               # Marketing pages
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ (auth)/                 # Auth experience
â”‚   â”‚   â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ (dashboard)/            # Protected app
â”‚   â”‚   â”‚   â”œâ”€â”€ products/page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ orders/page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                    # BFF layer (thin controllers)
â”‚   â”‚   â”‚   â””â”€â”€ products/route.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ layout.tsx              # Root layout
â”‚   â”‚   â””â”€â”€ globals.css
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                   # ğŸ§  DOMAIN-DRIVEN MODULES
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getProducts.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ createProduct.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductCard.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProductTable.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useProducts.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ services/           # Business rules
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ product.service.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ product.schema.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ orders/
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                 # ğŸ” Shared reusable UI
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Input.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ form/
â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                      # Global hooks
â”‚   â”‚   â”œâ”€â”€ useDebounce.ts
â”‚   â”‚   â”œâ”€â”€ useMediaQuery.ts
â”‚   â”‚   â””â”€â”€ useAuth.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                        # âš™ï¸ Infrastructure Layer
â”‚   â”‚   â”œâ”€â”€ fetcher.ts              # API client
â”‚   â”‚   â”œâ”€â”€ env.ts                  # Typed env config
â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â”‚   â”œâ”€â”€ analytics.ts
â”‚   â”‚   â””â”€â”€ auth.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ providers/                  # React providers
â”‚   â”‚   â”œâ”€â”€ QueryProvider.tsx
â”‚   â”‚   â”œâ”€â”€ ThemeProvider.tsx
â”‚   â”‚   â””â”€â”€ SessionProvider.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ tokens.css
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                      # Global types
â”‚   â”‚   â””â”€â”€ global.d.ts
â”‚   â”‚
â”‚   â””â”€â”€ config/                     # App-level configs
â”‚       â”œâ”€â”€ routes.ts
â”‚       â””â”€â”€ navigation.ts
â”‚
â”œâ”€â”€ tests/                          # E2E + integration tests
â”‚   â”œâ”€â”€ e2e/
â”‚   â””â”€â”€ integration/
â”‚
â”œâ”€â”€ .env
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```
